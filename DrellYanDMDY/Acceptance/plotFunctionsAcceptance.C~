#include "../Include/plotFunctions.hh"
#include "../Include/MyTools.hh"
#include "../Include/DYTools.hh"

#include <TROOT.h>
#include <TStyle.h>
#include <TCanvas.h>
#include <TH2D.h>
#include <TAxis.h>

void PlotAccMatrix(TMatrixD accv)
{
   TMatrixD accvDraw = matrDrawBinning(accv);
   gStyle->SetPalette(1);

   TString name="acceptance"; 

   TCanvas* canv=new TCanvas(name,name);
   canv->SetFillColor(0);
   canv->SetLeftMargin     (0.1);
   canv->SetRightMargin    (0.1);

   int nM=accv.GetNrows();
   int nY=accv.GetNcols();

   //std::cout<<"nM="<<nM<<", nY="<<nY<<std::endl;
   TH2D* accHist= new TH2D("accHist","accHist", nM, DYTools::massBinLimits2D, nY, DYTools::yRangeMin, DYTools::yRangeMax);

   for (int i=0; i<nM; i++)
     for (int j=0; j<nY; j++)
       {
         accHist->SetBinContent(i+1,j+1,accvDraw(i,j));
       }
  
   accHist->SetStats(0);

   accHist->SetTitle(name);
   TAxis* xAx=accHist->GetXaxis();
   xAx->SetTitle("mass, GeV");
   xAx->SetMoreLogLabels(kTRUE);
   TAxis* yAx=accHist->GetYaxis();
   yAx->SetTitle("|Y|");
   canv->SetLogx();

  accHist->Draw("LEGO2");
  SaveCanvas(canv, name);
   
}
